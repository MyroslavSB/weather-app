"use strict";(self.webpackChunkWeatherApp=self.webpackChunkWeatherApp||[]).push([[864],{6864:(T,c,a)=>{a.r(c),a.d(c,{MainPageComponent:()=>O});var t=a(4946),s=a(6814),l=a(6306),g=a(6232),d=a(4664),h=a(2370),p=a(1993),m=a(2691);function f(e,r){1&e&&(t.TgZ(0,"div",2),t._UZ(1,"app-base-icon",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("name","loader"))}let u=(()=>{class e{constructor(){this.showLoader=!1}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-base-loader"]],inputs:{showLoader:"showLoader"},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[[1,"loader"],["class","loader-icon",4,"ngIf"],[1,"loader-icon"],[3,"name"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,f,2,1,"div",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",i.showLoader))},dependencies:[s.ez,s.O5,m.l],styles:["@keyframes _ngcontent-%COMP%_rotation{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}.loader[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;max-height:154px;max-width:154px}.loader-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:154px;height:154px;animation:_ngcontent-%COMP%_rotation 1s linear infinite;transform:translate(-50%,-50%)}"],changeDetection:0})}return e})();var v=a(5619),y=a(5592);let C=(()=>{class e{constructor(){this.userCity=new v.X(null)}getCurrentLocation(){return new y.y(n=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{n.next(o),n.complete()},o=>{n.error(o)}):n.error("Geolocation is not supported by this browser.")})}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var x=a(8966);function L(e,r){1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"app-base-loader",4),t.qZA(),t.BQk()),2&e&&(t.xp6(2),t.Q6J("showLoader",!0))}function Z(e,r){if(1&e&&(t.TgZ(0,"div",8),t._UZ(1,"app-city-weather-card",9),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("city",n.userCity$)}}function M(e,r){1&e&&(t.TgZ(0,"div",10)(1,"h1",11),t._uU(2," You can find your desired city by entering its name in the input on top "),t.qZA()())}function A(e,r){if(1&e&&(t.TgZ(0,"div",5),t.YNc(1,Z,2,1,"div",6),t.ALo(2,"async"),t.YNc(3,M,3,0,"ng-template",null,7,t.W1O),t.qZA()),2&e){const n=t.MAs(4),o=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.userCity$))("ngIfElse",n)}}let O=(()=>{class e{constructor(n,o,i){this.locationService=n,this.geocodingApi=o,this.cdRef=i,this.userCity$=this.locationService.userCity.asObservable(),this.destroyRef=(0,t.f3M)(t.ktI),this.isLoading=!1}ngOnInit(){this.getUserLocation()}getUserLocation(){this.locationService.getCurrentLocation().pipe((0,p.sL)(this.destroyRef),(0,l.K)(n=>(console.error(n),g.E)),(0,d.w)(n=>this.geocodingApi.getPotentialUserCities({lat:n.coords.latitude,lon:n.coords.longitude}).pipe((0,p.sL)(this.destroyRef),(0,l.K)(i=>(console.error(i),g.E))))).subscribe(n=>{0!==n.length?(this.locationService.userCity.next(n[0]),this.cdRef.detectChanges()):this.cdRef.detectChanges()})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(C),t.Y36(x.F),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"landing-page"],[4,"ngIf","ngIfElse"],["main",""],[1,"loader-container"],[3,"showLoader"],[1,"landing-page__main"],["class","landing-page__main-city",4,"ngIf","ngIfElse"],["no_location",""],[1,"landing-page__main-city"],[3,"city"],[1,"landing-page__main-empty"],[1,"headline-1"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,L,3,1,"ng-container",1),t.YNc(2,A,5,4,"ng-template",null,2,t.W1O),t.qZA()),2&o){const P=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.isLoading)("ngIfElse",P)}},dependencies:[s.ez,s.O5,s.Ov,h.r,u],styles:[".landing-page__main-empty[_ngcontent-%COMP%]{max-width:250px;margin:0 auto;text-align:center}"],changeDetection:0})}return e})()}}]);