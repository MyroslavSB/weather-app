"use strict";(self.webpackChunkWeatherApp=self.webpackChunkWeatherApp||[]).push([[864],{6864:(P,c,a)=>{a.r(c),a.d(c,{MainPageComponent:()=>O});var t=a(4946),s=a(6814),l=a(6306),d=a(6232),p=a(4664),f=a(2370),g=a(1993),u=a(2691);function m(e,h){1&e&&(t.TgZ(0,"div",2),t._UZ(1,"app-base-icon",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("name","loader"))}let v=(()=>{class e{constructor(){this.showLoader=!1}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-base-loader"]],inputs:{showLoader:"showLoader"},standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[[1,"loader"],["class","loader-icon",4,"ngIf"],[1,"loader-icon"],[3,"name"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,m,2,1,"div",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",i.showLoader))},dependencies:[s.ez,s.O5,u.l],styles:["@keyframes _ngcontent-%COMP%_rotation{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(360deg)}}.loader[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;max-height:154px;max-width:154px}.loader-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:154px;height:154px;animation:_ngcontent-%COMP%_rotation 1s linear infinite;transform:translate(-50%,-50%)}"],changeDetection:0})}return e})();var C=a(5619),y=a(5592);let L=(()=>{class e{constructor(){this.userCity=new C.X(null)}getCurrentLocation(){return new y.y(n=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{n.next(o),n.complete()},o=>{n.error(o)}):n.error("Geolocation is not supported by this browser.")})}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var x=a(8966),Z=a(86);function M(e,h){1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"app-base-loader",4),t.qZA(),t.BQk()),2&e&&(t.xp6(2),t.Q6J("showLoader",!0))}function w(e,h){if(1&e&&(t.TgZ(0,"div",5),t._UZ(1,"app-city-weather-card",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("city",n.userCity$)}}let O=(()=>{class e{constructor(n,o,i,r){this.locationService=n,this.geocodingApi=o,this.router=i,this.cdRef=r,this.userCity$=this.locationService.userCity.asObservable(),this.destroyRef=(0,t.f3M)(t.ktI),this.isLoading=!1}ngOnInit(){this.getUserCity()}getUserCity(){this.isLoading=!0,this.locationService.getCurrentLocation().pipe((0,g.sL)(this.destroyRef),(0,l.K)(n=>(this.onLocationError(n),d.E)),(0,p.w)(n=>this.geocodingApi.getPotentialUserCities({lat:n.coords.latitude,lon:n.coords.longitude}).pipe((0,g.sL)(this.destroyRef),(0,l.K)(i=>(this.onLocationError(i),d.E))))).subscribe(n=>{if(0===n.length)return this.isLoading=!1,void this.cdRef.detectChanges();this.locationService.userCity.next(n[0]),this.isLoading=!1,this.cdRef.detectChanges()})}onLocationError(n){console.error(n),this.router.navigateByUrl("wroclaw"),this.isLoading=!1,this.cdRef.detectChanges()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(L),t.Y36(x.F),t.Y36(Z.F0),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"landing-page"],[4,"ngIf","ngIfElse"],["main",""],[1,"loader-container"],[3,"showLoader"],[1,"landing-page__main"],[3,"city"]],template:function(o,i){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,M,3,1,"ng-container",1),t.YNc(2,w,2,1,"ng-template",null,2,t.W1O),t.qZA()),2&o){const r=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.isLoading)("ngIfElse",r)}},dependencies:[s.ez,s.O5,f.r,v],changeDetection:0})}return e})()}}]);